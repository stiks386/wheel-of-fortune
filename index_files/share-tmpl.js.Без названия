(function(d){if(!String.prototype.Format){String.prototype.Format=function(){var result=this;if(arguments.length>0){for(var i=0;i<arguments.length;i++){if(arguments[i]==null)arguments[i]='';var reg=new RegExp("(\\{"+i+"\\})","g");result=result.replace(reg,arguments[i]);}}
return result;};}
if(!String.prototype.Compile){String.prototype.Compile=function(obj){return this.replace(/\{([\w ]+)\}/g,function($1,$2){return(obj!=null?obj[$2]:void 0)==undefined?"":obj[$2];});};}
function lbasejs(e){return new Promise((function(t){(function n(){var r=e.checkLink;"undefined"===typeof r?e.requestAnimationFrame(n):(t(e))}())}))}
var renderPage=function(){var avatar=d.querySelector('.avatar img');if(__data.basic.cover){avatar.src=clearImage(__data.basic.cover,240,240);d.querySelector('.avatar').classList.add('verified','verified-'+__data.basic.verified);}else{d.querySelector('.avatar').style.display='none';}
d.querySelector('.text h3').innerHTML=__data.basic.title||'';d.querySelector('.text .desc').innerHTML=__data.basic.desc||'';var center=d.querySelector('.center');var _tmpl=d.querySelector('#btnLinkTmpl').innerHTML;__data.buttons.forEach(function(ele,idx){if(scheduleTime(ele.scheduled,ele.start,ele.end)){ele.lid=__data.bio.id;ele.animation=__animate[ele.featured];ele.link1=checkLink(ele.link,ele.type,ele.subtype,ele.link2,ele.title);ele.target=ele.link1=='javascript:;'?'':'top';ele.text=encodeURIComponent(ele.text||'');ele.linktext=(ele.link||'').replace(/^https?:?\/?\/?/i,'');ele.link2=encodeURIComponent(ele.link2||'');if(ele.icon&&(ele.icon.indexOf('bio/links/icons/')!=-1||ele.icon.indexOf('statics/links/btn-')!=-1)){var _k=getImageKey(ele.icon);if(_k){ele.iconfont='icon-'+_k;}else{ele.displayImg='block';ele.displayIcon='hidden';}}else{ele.displayImg='block';ele.displayIcon='hidden';}
ele.icon=clearImage(ele.icon,120,120);var _div=d.createElement('div');_div.className='btn-show';_div.innerHTML=_tmpl.Compile(ele);center.appendChild(_div);}});if(__data.media.state==1&&__data.media.socials){_tmpl=d.querySelector('#socialLinkTmpl').innerHTML;var socials=d.querySelector('.social_list-spirit'),socialsSVG3=d.querySelector('.social_list-svg-3'),socialsSVG4=d.querySelector('.social_list-svg-4'),_tmplSVG=d.querySelector('#socialLinkSVGTmpl').innerHTML;__data.media.socials.forEach(function(ele,idx){ele.lid=__data.bio.id;ele.link1=checkLink(ele.link,1);ele.image=(ele.type==0&&ele.image)?clearImage(ele.image,120):clearImage('statics/links/icons-socials/spirit/'+ele.type+'.png');ele.image1=(ele.type==0&&ele.image)?clearImage(ele.image,120):'';ele.blendMode=(ele.type==0&&ele.image)?'blend-mode':'';var _span=d.createElement('span'),_span3=d.createElement('span'),_span4=d.createElement('span');_span.className='social-show';_span3.className='social-show';_span4.className='social-show';_span.innerHTML=_tmpl.Compile(ele);ele.st=3;_span3.innerHTML=_tmplSVG.Compile(ele);ele.st=4;_span4.innerHTML=_tmplSVG.Compile(ele);socials.appendChild(_span);socialsSVG3.appendChild(_span3);socialsSVG4.appendChild(_span4);});}},oldWinLoad=null;if(window.onload&&(typeof window.onload=='function')){oldWinLoad=window.onload;window.onload=function(){oldWinLoad();}}
if(__data.bio.logoshow==1){var _footer=d.createElement('div');_footer.className='footer';_footer.innerHTML='<p><a href="https://linkfly.to/linkflymadewith"><span> Linkfly</span></a></p>';d.body.appendChild(_footer);}
lbasejs(window).then(function(){renderPage();});window.onmessage=function(event){if(event.origin=='https://linkfly.to'){if(event.data.code&&event.data.fn=='authCallback'){d.querySelector('.modal-block .info').style.display='none';d.querySelector('.modal-block .success').style.display='block';d.querySelector('.modal-block .subs-btn').style.display='none';}}}})(document);(function(d,s){var MUSIC_SERVICES={'spotify':'Spotify','applemusic':'Apple Music','deezer':'Deezer','googleplaymusic':'Google Play Music','iTunes':'iTunes','napster':'Napster','soundcloud':'SoundCloud','youtube':'Youtube','amazonmusic':'Amazon Music','tidal':'Tidal','yandex':'Yandex Music','pandora':'Pandora','spinrilla':'Spinrilla','anghami':'Anghami','audiomack':'Audiomack','awa':'AWA','bandcamp':'Bandcamp','beatport':'Beatport','bleep':'Bleep','boomkat':'Boomkat','emusic':'eMusic','flo':'Flo','genie':'Genie','groove':'Groove Music','hardwax':'Hard Wax','hdtracks':'HDtracks','iheartradio':'iHeartRadio','juno':'Juno','kkbox':'KKBOX','linemusic':'Line Music','melon':'Melon','mixcloud':'Mixcloud','simfyafrica':'Simfy Africa','qobuz':'Qobuz','traxsource':'Traxsource','vevo':'Vevo','vibe':'Vibe','wasabeat':'Wasabeat','whatpeopleplay':'Whatpeopleplay','wimp':'Wimp','zingmp3':'Zing MP3','7digital':'7digital','8tracks':'8tracks','amazonalex':'Amazon Alex','boomplay':'Boomplay','qq':'QQ音乐','qingting':'蜻蜓FM','amazon':'Amazon','twitter':'Twitter','bugs':'Bugs!','clipfish':'Clipfish','gaana':'Gaana','jiosaavn':'JioSaavn','joox':'JOOX','kugou':'酷狗音乐','kting':'酷听','kuwo':'酷我音乐','lizhi':'荔枝FM','migu':'咪咕音乐','mixerbox':'MixerBox','moov':'MOOV','patari':'PATARI','pulselocker':'Pulselocker','qianqian':'千千','suamusica':'SuaMúsica','neteasecloudmusic':'NeteaseCloudMusic','xiami':'虾米音乐','youseemusik':'youSee MUSIK','googleplay':'Google Play','eventbrite':'eventbrite','bandsintown':'Bandsintown','youtubemusic':'YouTube Music'};function _int(num){num=parseInt(num,10);if(isNaN(num))return 0;return num;}
function _hex2rgb(color,opacity){opacity=(typeof opacity!=='undefined')?opacity:null;if(color){color=color.replace('#','');opacity=(opacity===null||opacity==='')?1:_int(opacity)/100;if(opacity<=0)return 'rgba(0,0,0,0)';if(color.length==3){return 'rgba({r},{g},{b},{a})'.Compile({r:color[0],g:color[1],b:color[2],a:opacity.toFixed(3)})}
if(color.length==4){return 'rgba({r},{g},{b},{a})'.Compile({r:color[0],g:color[1],b:color[2],a:(parseInt(color[3]+color[3],16)/255).toFixed(3)})}
if(color.length==6){return 'rgba({r},{g},{b},{a})'.Compile({r:parseInt(color.substr(0,2),16),g:parseInt(color.substr(2,2),16),b:parseInt(color.substr(4,2),16),a:opacity.toFixed(3)})}
if(color.length==8){return 'rgba({r},{g},{b},{a})'.Compile({r:parseInt(color.substr(0,2),16),g:parseInt(color.substr(2,2),16),b:parseInt(color.substr(4,2),16),a:(parseInt(color.substr(4,2),16)/255).toFixed(3)})}}
return 'rgba(0,0,0,0)';}
function _format_color(color){if(color){if(typeof color=='number')color=color+'';if(color.startsWith('rgba(')){var _color_val=color.replace('rgba(','');if(_color_val.endsWith(')'))_color_val=_color_val.slice(0,-1);_color_val=_color_val.split(',');if(_color_val.length==3)return 'rgba({0}, {1}, {2}, 1)'.Format(_color_val[0],_color_val[1],_color_val[2]);if(_color_val.length==4)return 'rgba({0}, {1}, {2}, {3})'.Format(_color_val[0],_color_val[1],_color_val[2],_color_val[3]);return color;}
if(color.startsWith('rgb(')){_color_val=color.replace('rgb(','');if(_color_val.endsWith(')'))_color_val=_color_val.slice(0,-1);_color_val=_color_val.split(',');if(_color_val.length==3)return 'rgb({0}, {1}, {2})'.Format(_color_val[0],_color_val[1],_color_val[2]);if(_color_val.length==4)return 'rgba({0}, {1}, {2}, {3})'.Format(_color_val[0],_color_val[1],_color_val[2],_color_val[3]);return color}
if(!color.startsWith('#'))return '#'+color;return color}
return ''}
var APIHOST=document.querySelector('meta[property="api:host"]').content+'/v/2.0';var v=function(a,b,t){t=t||d;t.addEventListener?t.addEventListener(a,b,!1):t.attachEvent&&t.attachEvent("on"+a,b)};var lfjax=function(method,url,options){var xhr=new XMLHttpRequest();options=options||{};xhr.open((method||'GET').toUpperCase(),APIHOST+url);if(method=='POST')xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.responseType='text';xhr.onload=function(){};xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE&&xhr.status===200){if(options.fn&&typeof options.fn=='function'){options.fn(xhr.responseText)}}};xhr.onerror=function(){};try{if(options.data){var _data=[];if(!options.data.push&&typeof options.data=='object'){for(var x in options.data){_data.push(encodeURIComponent(x)+'='+encodeURIComponent(options.data[x]));}
options.data=_data;}}else{options.data=[];}
xhr.send(options.data.join('&'));}catch(e){}};function eleParents(tar,selector){selector=selector||"div.con-tab";if(selector&&tar&&tar.nodeName!='HTML'){if(selector.indexOf('.')!=-1){var _sel=selector.split('.');if((!_sel[0]||tar.nodeName==_sel[0].toUpperCase())&&tar.classList.contains(_sel[1])){return tar;}else{return eleParents(tar.parentNode,selector);}}else if(selector.indexOf('#')!=-1){var _sel=selector.split('#');if((!_sel[0]||tar.nodeName==_sel[0].toUpperCase())&&tar.id==_sel[1]){return tar;}else{return eleParents(tar.parentNode,selector);}}else{var _sel=[selector];if(tar.nodeName==_sel[0].toUpperCase()){return tar;}else{return eleParents(tar.parentNode,selector);}}}else{return null;}}
var Lfy_Form_Theme_Style={style:{border:`.form-control input,.form-control select,.form-control textarea,.form-field-phone .dial-code{border:2px solid var(--form-style-color);background:transparent;}
    .form-field-phone .dial-code{border-right:0;}`,background:`.form-control input,.form-control select,.form-control textarea,.form-field-phone .dial-code{border:2px solid transparent;background:var(--form-style-color);}
    .form-field-phone .dial-code{border-right:0;}`,underline:`.form-control input,.form-control select,.form-control textarea,.form-field-phone .dial-code{border:2px solid transparent;background:transparent;border-bottom:2px solid var(--form-style-color);border-right:0;border-left:0;}
    .form-field-phone .dial-code{border-right:0;border-left:0;}`,},color:`--form-style-color:{0};`,},Lfy_Form_Theme_Background={color:'--form-bg-color:{0};'},Lfy_Form_Theme_Text={font:'--form-tmpl-font:{0};',color:`--form-text-color:{0};`,color1:`--form-title-color:{0};`,},Lfy_Form_Theme_Submit={style:{border:`.form-button button{background:transparent;border:2px solid var(--form-submit-color);}`,background:`.form-button button{background:var(--form-submit-color);border:2px solid transparent;}`,},color:`--form-submit-color:{0};`,color1:`--form-submit-font-color:{0};`,};window.FormThemeConfig=function(data){this.configs=[];var _this=this;if(data){if(!Array.isArray(data)){data=[data];}
data.forEach(function(item,idx){if(item.key=='style')_this.configs.push(new FormThemeConfigStyle(item.value));if(item.key=='background')_this.configs.push(new FormThemeConfigBackground(item.value));if(item.key=='text')_this.configs.push(new FormThemeConfigText(item.value));if(item.key=='submit')_this.configs.push(new FormThemeConfigSubmit(item.value));});}
this._fields=['style','background','text','submit'];};FormThemeConfig.prototype={as_css:function(){var _css_list=[],_css_var_list=['body{'],_this=this;_this.configs.forEach(function(x,idx){var x_ret=x.as_css();_css_list=_css_list.concat(x_ret[0]);_css_var_list=_css_var_list.concat(x_ret[1]);});_css_var_list.push('}');return _css_var_list.join('\n')+_css_list.join('\n');},};var FormThemeConfigStyle=function(data){this.value=data||{};this._fields=['style','color'];};FormThemeConfigStyle.prototype={as_css:function(){var _style=Lfy_Form_Theme_Style,_this=this;var _css_list=[],_css_var_list=[];try{['style'].forEach(function(x,idx){if(!isEmpty(_this.value[x])){var _x_dict=_style[x];_css_list.push(_x_dict[_this.value[x]])}});['color'].forEach(function(x,idx){if(!isEmpty(_this.value[x])){var _x_dict=_style[x];_css_var_list.push(_x_dict.Format(_format_color(_this.value[x])))}});}catch(e){}
return[_css_list,_css_var_list];},};var FormThemeConfigBackground=function(data){this.value=data||{};this._fields=['color','opacity'];};FormThemeConfigBackground.prototype={as_css:function(){var _bg=Lfy_Form_Theme_Background,_this=this;var _css_list=[],_css_var_list=[];var x='color';if(!isEmpty(_this.value[x])){var _x_dict=_bg[x];_css_var_list.push(_x_dict.Format(_hex2rgb(_this.value[x],_this.value.opacity)))}
return[_css_list,_css_var_list];}};var FormThemeConfigText=function(data){this.value=data||{};this._fields=['font','color','color1'];};FormThemeConfigText.prototype={as_css:function(){var _text=Lfy_Form_Theme_Text,_this=this;var _css_list=[],_css_var_list=[];try{['font'].forEach(function(x,idx){if(!isEmpty(_this.value[x])){var _x_dict=_text[x];_css_var_list.push(_x_dict.Format(_this.value[x]))}});['color','color1'].forEach(function(x,idx){if(!isEmpty(_this.value[x])){var _x_dict=_text[x];_css_var_list.push(_x_dict.Format(_format_color(_this.value[x])))}});}catch(e){}
return[_css_list,_css_var_list];},};var FormThemeConfigSubmit=function(data){this.value=data||{};this._fields=['style','color','color1'];};FormThemeConfigSubmit.prototype={as_css:function(){var _button=Lfy_Form_Theme_Submit,_this=this;var _css_list=[],_css_var_list=[];try{['style'].forEach(function(x,idx){if(!isEmpty(_this.value[x])){var _x_dict=_button[x];_css_list.push(_x_dict[_this.value[x]])}});['color','color1'].forEach(function(x,idx){if(!isEmpty(_this.value[x])){var _x_dict=_button[x];_css_var_list.push(_x_dict.Format(_format_color(_this.value[x])))}});}catch(e){}
return[_css_list,_css_var_list];},};function isEmail(email){var regEmail=/\w+([\w.-])*@[\w-]+\.\w+[.|\w]*/;if(email)return!(regEmail.test(email)==false);return true;}
window.onloadCallback=function(){grecaptcha.render('html_element',{'sitekey':'6Le23HcaAAAAAFFuMjQSKX_u1KPSUvu-ZCMhXJQu','callback':onSubmit,});};function onSubmit(token){}
function handleSubmit(evt){if(evt.target.nodeName=="BUTTON"&&evt.target.parentElement.classList.contains('form-submit')){var pTar=eleParents(evt.target,'.embed-form');var data=[],error,field,email='',sync=0,fullname='';Array.from(pTar.querySelectorAll('.error')).forEach(function(ele){ele.remove();});Array.from(pTar.querySelectorAll('.form-field')).forEach(function(ele){var _field=ele.querySelector('.data-field'),val={key:ele.dataset.param,required:parseInt(_field.dataset.required,10)};switch(val.key){case 'email':if(!sync)sync=parseInt(_field.dataset.sync,10);email=_field.value;val.value=_field.value;val.title=_field.placeholder;if(!isEmail(val.value)){error='Please enter a valid email address';ele.innerHTML+='<span class="error">{0}</span>'.Format(error);}
break;case 'input':val.value=_field.value;val.title=_field.placeholder;if(isEmpty(fullname))fullname=val.value;break;case 'phone':val.value=_field.value;val.title=_field.placeholder;var _li=ele.querySelector('.dial-code-select li.selected');if(_li){val.dial=_li.dataset.dial;val.country=_li.dataset.country;val.countryCode=_li.dataset.code;}
break;case 'dropdown':val.value=_field.value;val.title=_field.querySelector('option').innerText;break;case 'text':val.value=_field.value;val.title=_field.placeholder;break;case 'number':val.value=_field.value;val.title=_field.placeholder;break;case 'radio':val.value=_field.querySelector('input:checked')?_field.querySelector('input:checked').value:'';val.title=_field.querySelector('.form-field-radio-title').innerText;break;case 'checkbox':val.title=_field.querySelector('.form-field-checkbox-title').innerText;val.value=(function(){var ret=[];Array.from(_field.querySelectorAll('input:checked')).forEach(function(e){ret.push(e.value);});return ret.join('lf:;');})();break;case 'regions':val.value=_field.value;val.title=_field.querySelector('option').innerText;break;case 'date':val.value=_field.value;val.title=_field.placeholder;break;case 'time':val.value=_field.value;val.title=_field.placeholder;break;}
if(val.required==1&&isEmpty(val.value)){error='This field can not be blank';ele.innerHTML+='<span class="error">{0}</span>'.Format(error);}
data.push(val);});if(error)return;var gRecaptcha=pTar.querySelector('textarea[name=g-recaptcha-response]').value;if(!gRecaptcha)return;lfjax('POST','/share/link/{linkid}/submit/form/'.Compile({linkid:__data.bio.id}),{data:{'fields':JSON.stringify(data),'sync':sync,'fullname':fullname,'email':email,'g-recaptcha-response':gRecaptcha,'title':pTar.querySelector('.form-title .data-field').innerText},fn:function(resp){resp=JSON.parse(resp||'{}');if(resp.code==0)pTar.querySelector('.form-thanks').style.display='block';grecaptcha.reset();}});}}
function ltwwjs(e){return new Promise((function(t){(function n(){var r=e.twttr;"undefined"===typeof r||"undefined"===typeof r.ready?e.requestAnimationFrame(n):r.ready((function(e){t(e)}))}())}))}
function lglmapsjs(e){return new Promise((function(t){(function n(){var r=(e.google||{}).maps;"undefined"===typeof r?e.requestAnimationFrame(n):(t(e))}())}))}
function lstripejs(e){return new Promise((function(t){(function n(){var r=e.Stripe;"undefined"===typeof r?e.requestAnimationFrame(n):(t(e))}())}))}
function lpaypaljs(e){return new Promise((function(t){(function n(){var r=e.paypal;"undefined"===typeof r?e.requestAnimationFrame(n):(t(e))}())}))}
function ljedatejs(e){return new Promise((function(t){(function n(){var r=e.jeDate;"undefined"===typeof r?e.requestAnimationFrame(n):(t(e))}())}))}
function lfbjs(e){return new Promise((function(t){(function n(){var r=e.FB;"undefined"===typeof r?e.requestAnimationFrame(n):(t(e))}())}))}
function endLoaded(loadEle,endfn){if(loadEle instanceof Node||loadEle instanceof HTMLElement){loadEle.remove();}else if(typeof loadEle=='string'){if(d.querySelector(loadEle))d.querySelector(loadEle).remove();}
if(endfn&&typeof endfn=='function'){endfn();}}
var selectSupportAmount=function(e){var _fbe=e.target||e.srcElement||{};if(_fbe.nodeName=='INPUT'){var _fbeP=null;if(_fbe.type=='radio'){_fbeP=eleParents(_fbe,'.amount-select');if(_fbeP.querySelector('div .selected'))_fbeP.querySelector('div .selected').classList.remove('selected');_fbe.parentElement.parentElement.querySelector('.amount-select-label').classList.add('selected');}else if(_fbe.type=='number'){_fbeP=eleParents(_fbe,'.support-amount');if(_fbeP.querySelector('div .selected')){_fbeP.querySelector('div .selected').classList.remove('selected');_fbeP.querySelector('input[type=radio]:checked').removeAttribute('checked');}}
if(parseFloat(_fbe.value||0)<1000.0){_fbeP=eleParents(_fbe,'.embed-support');if(_fbe.value>0){_fbeP.querySelector('.support-continue button').removeAttribute('disabled');}
else{eleParents(_fbe,'.embed-support').querySelector('.support-continue button').setAttribute('disabled',true);}
if(_fbeP.querySelector('.embed-support-error'))_fbeP.querySelector('.embed-support-error').remove();}else{if(!_fbeP.querySelector('.embed-support-error')){var errP=d.createElement('p');errP.innerHTML='This amount is too high, please set a lower amount';errP.className='embed-support-error';_fbeP.querySelector('.support-amount-custom').appendChild(errP);}
eleParents(_fbe,'.embed-support').querySelector('.support-continue button').setAttribute('disabled',true);}}};var payContinue=function(e){var _fbe=e.target||e.srcElement||{};var _embedBox=eleParents(_fbe,'.embed-box');if(_embedBox){_embedBox.querySelector('.embed-support').style.display='none';_embedBox.querySelector('.embed-support-detail').style.display='block';var amount=0;if(_embedBox.querySelector('.embed-support .selected')){amount=parseInt(_embedBox.querySelector('.embed-support input[name=amount]:checked').value)/100.0;}else{amount=parseInt(parseFloat(_embedBox.querySelector('.amount-custom-input').value)*100,10)/100.0;}
_embedBox.querySelector('.embed-support-detail .support-detail-amount').innerHTML=amount;}};var payBack=function(e){var _fbe=e.target||e.srcElement||{};var _embedBox=eleParents(_fbe,'.embed-box');if(_embedBox){_embedBox.querySelector('.embed-support').style.display='block';_embedBox.querySelector('.embed-support-detail').style.display='none';}};var paySupportCheckEmail=function(e){var _fbe=e.target||e.srcElement||{};var email=_fbe.value.trim();var regEmail=/\w+([\w.-])*@[\w-]+\.\w+[.|\w]*/;if(regEmail.test(email)==false){eleParents(_fbe,'.embed-support-detail').querySelector('.support-continue button').setAttribute('disabled',true);}else{eleParents(_fbe,'.embed-support-detail').querySelector('.support-continue button').removeAttribute('disabled');}};var paySupportStripe=function(fbe){var stripe=Stripe(fbe.dataset.key);var elements=stripe.elements({locale:(navigator.language||navigator.userLanguage).substring(0,2)||'en'});var style={base:{color:'#32325d',fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:'antialiased',fontSize:'16px','::placeholder':{color:'#c2c2c2'}},invalid:{color:'#f15e48',iconColor:'#f15e48'}};var card=elements.create('card',{style:style});card.addEventListener('change',function(event){var displayError=eleParents(fbe,'.pay-element').querySelector('.pay-stripe #card-errors');if(event.error){displayError.textContent=event.error.message;fbe.setAttribute('disabled',true);}else{displayError.textContent='';}
if(event.complete){eleParents(fbe,'.pay-element').querySelector('.pay-stripe .support-continue button').removeAttribute('disabled');}else{eleParents(fbe,'.pay-element').querySelector('.pay-stripe .support-continue button').setAttribute('disabled',true);}});card.mount(eleParents(fbe,'.pay-element').querySelector('.pay-stripe #card-element'));var form=eleParents(fbe,'.pay-element').querySelector('.pay-stripe #payment-form');form.addEventListener('submit',function(event){event.preventDefault();function showError(message){var errorElement=eleParents(fbe,'.pay-element').querySelector('.pay-stripe #card-errors');errorElement.textContent=message;card.update({disabled:false});eleParents(fbe,'.pay-stripe').querySelector('.support-continue').style.display='block';eleParents(fbe,'.pay-stripe').querySelector('.embed-loading').style.display='none';}
eleParents(fbe,'.pay-element').querySelector('.pay-stripe .support-continue').style.display='none';eleParents(fbe,'.pay-element').querySelector('.pay-stripe .embed-loading').style.display='block';stripe.createPaymentMethod({type:'card',card:card}).then(function(result){var email=eleParents(fbe,'.embed-support-detail').querySelector('input[name=email]').value,note=eleParents(fbe,'.embed-support-detail').querySelector('textarea').value,amount=0;if(eleParents(fbe,'.embed-box').querySelector('.embed-support .selected')){amount=eleParents(fbe,'.embed-box').querySelector('.embed-support input[name=amount]:checked').value;}else{amount=parseInt(parseFloat(eleParents(fbe,'.embed-box').querySelector('.amount-custom-input').value)*100,10);}
if(result.error){showError(result.error.message);}else{lfjax('POST','/share/support/{uid}/link/{lnkid}/pm/stripe/'.Compile({lnkid:__data.bio.id,uid:__data.basic.uid}),{data:{'email':email,'note':note,'amount':amount,'pmid':result.paymentMethod.id,'pk':fbe.dataset.id,'kid':(eleParents(fbe,'.btn-show').querySelector('.item a').dataset.kid)},fn:function(resp){swal('',eleParents(fbe,'.embed-box').querySelector('.support-detail').dataset.success||'Thanks!','success');eleParents(fbe,'.embed-box').remove();}});return;}});});};function paySupportPaypal(fbe){var amount=0,email=eleParents(fbe,'.embed-support-detail').querySelector('input[name=email]').value,note=eleParents(fbe,'.embed-support-detail').querySelector('textarea').value;if(eleParents(fbe,'.embed-box').querySelector('.embed-support .selected')){amount=parseInt(eleParents(fbe,'.embed-box').querySelector('.embed-support input[name=amount]:checked').value)/100.0;}else{amount=parseInt(parseFloat(eleParents(fbe,'.embed-box').querySelector('.amount-custom-input').value)*100,10)/100.0;}
try{paypal.Buttons({createOrder:function(data,actions){return actions.order.create({purchase_units:[{amount:{value:amount+'',breakdown:{item_total:{value:amount+'',currency_code:'USD'}},},description:note,items:[{name:'Linkfly: Support Me',quantity:'1',unit_amount:{currency_code:'USD',value:amount+''}}]}],payer:{email_address:email},});},onApprove:function(data,actions){return actions.order.capture().then(function(orderData){lfjax('POST','/share/support/{uid}/link/{lnkid}/pm/paypal/'.Compile({lnkid:__data.bio.id,uid:__data.basic.uid}),{data:{'email':email,'note':note,'amount':(parseInt(amount*100)),'order':orderData.id,'pk':fbe.dataset.id,'kid':(eleParents(fbe,'.btn-show').querySelector('.item a').dataset.kid)},fn:function(resp){swal('',eleParents(fbe,'.embed-box').querySelector('.support-detail').dataset.success||'Thanks!','success');eleParents(fbe,'.embed-box').remove();}});});},onCancel:function(data){},onError:function(err){}}).render(eleParents(fbe,'.pay-element').querySelector('.pay-paypal #paypal-button-container'));}catch(e){}}
var paySupportAction=function(e){var _fbe=e.target||e.srcElement||{};var payELe=eleParents(_fbe,'.pay-element');payELe.querySelector('.pay-action').style.display='none';if(parseInt(_fbe.dataset.type,10)==3){payELe.querySelector('.pay-stripe').style.display='block';if(d.querySelector('#stripe-js')){paySupportStripe(_fbe);}else{var fjs=d.getElementsByTagName(s)[0];var js=d.createElement(s);js.id='stripe-js';js.async=!0;js.src='https://js.stripe.com/v3/';fjs.parentNode.insertBefore(js,fjs);lstripejs(window).then(function(){paySupportStripe(_fbe);});}}else if(parseInt(_fbe.dataset.type,10)==1||parseInt(_fbe.dataset.type,10)==2||parseInt(_fbe.dataset.type,10)==4){payELe.querySelector('.pay-paypal').style.display='block';if(d.querySelector('#paypal-js'))d.querySelector('#paypal-js').remove();var fjs=d.getElementsByTagName(s)[0];var js=d.createElement(s);js.id='paypal-js';js.async=!0;if(parseInt(_fbe.dataset.type,10)==4){js.src='https://www.paypal.com/sdk/js?client-id=AWreu1dZCirOqcXASv7yoSBZUJSioRWTAyLKUWqXAGweFSyoE7SJy88jjlTG4UJvAXuy0-MCRyxFz18F&&merchant-id={0}&vault=true'.Format(_fbe.dataset.merchantid);}else{js.src='https://www.paypal.com/sdk/js?client-id={0}&vault=true'.Format(_fbe.dataset.key);}
fjs.parentNode.insertBefore(js,fjs);lpaypaljs(window).then(function(){paySupportPaypal(_fbe);});}};window.musicPreviewMore=function(that){if(that){if(that.dataset.action=='more'){that.dataset.action='less';that.innerText='Show less';that.parentElement.parentElement.querySelectorAll('.music-preview .msuic-preview-service:nth-child(n+6)').forEach(function(ele){ele.style.display='flex';});}else{that.dataset.action='more';that.innerText='Show more';that.parentElement.parentElement.querySelectorAll('.music-preview .msuic-preview-service:nth-child(n+6)').forEach(function(ele){ele.style.display='none';})}}};var c=function(e){var _fbe=e.target||e.srcElement||{},_fte=e.target||e.srcElement||{},_tmpl=null;if(_fbe.href&&_fbe.nodeName=='A'){}else if(_fbe.nodeName=='IMG'||_fbe.nodeName=='SPAN'||_fbe.nodeName=='I'||_fbe.nodeName=='P'){_fbe=_fbe.parentElement;}else{}
if(_fbe.dataset.type==10){if(window.fbq)fbq('track','formClick');var _div=d.createElement('div'),_divBox=d.createElement('div'),_divDetail=d.createElement('div'),_divBg=d.createElement('div');_divBg.className='embed-bg';_divBox.className='embed-box';_divBox.innerHTML='<div class="embed-close"><i class="iconfont icon-close"></i></div>';_div.className='embed-form';_divDetail.className='embed-form-box form-tmpl';_divDetail.innerHTML=d.querySelector('#embedLoading').innerHTML;_div.appendChild(_divDetail);_divBox.appendChild(_div);_divBg.appendChild(_divBox);d.querySelector('body').append(_divBg);_divDetail.innerHTML=d.querySelector('#embedLoading').innerHTML;var __form=JSON.parse(decodeURIComponent(_fbe.dataset.txt||'')||'{}');if(!(__form.fields&&__form.submit)){var __ctx=__form.ctx||__form;__form.fields=[{"key":"email","required":1,"title":(__ctx.email||'').replace('*',''),sync:1},{"key":"input","required":0,"title":__ctx.fullname||''},];__form.title=__ctx.title;__form.submit={btn_text:__ctx.btn_text,thanks_text:__ctx.thanks_text};__form.themes=[{"key":"style","value":{"color":__ctx.color,"style":"border"}},{"key":"submit","value":{"style":"background","color":__ctx.color}},{"key":"text","value":{"font":__ctx.font}},]}
var renderForm=function(){_divDetail.innerHTML=d.querySelector('#form-detail').innerHTML.Format(location.pathname.substring(1));var _style=d.querySelector('#style-form-tmpl');if(!_style){_style=d.createElement('style');_style.id='style-form-tmpl';_style.type='text/css';d.querySelector('head').appendChild(_style);}
var _config=new FormThemeConfig(__form.themes);_style.innerHTML=_config.as_css();_divDetail.querySelector('.form-title .data-field').innerHTML=__form.title||'';_divDetail.querySelector('.form-button .data-field').innerHTML=__form.submit.btn_text||'';_divDetail.querySelector('.form-thanks span').innerHTML=__form.submit.thanks_text||'';var _fieldsGroup=document.querySelector('.form-fields-group');__form.fields.forEach(function(item,idx){if(['email','input','phone','text','regions','date','time','number'].includes(item.key)){_fieldsGroup.innerHTML+=document.querySelector('#form-field-'+item.key).innerHTML.Compile({idx:idx,title:item.title+(item.required==1?' *':''),required:item.required||0,sync:item.sync||0})}
if(item.key=='dropdown'){_fieldsGroup.innerHTML+=document.querySelector('#form-field-'+item.key).innerHTML.Compile({idx:idx,title:item.title+(item.required==1?' *':''),required:item.required||0,options:(function(){var ret='',tmpl='<option value="{0}">{0}</option>';(item.services||[]).forEach(function(v,i){ret+=tmpl.Format(v);});return ret;})()})}
if(['radio','checkbox'].includes(item.key)){_fieldsGroup.innerHTML+=document.querySelector('#form-field-'+item.key).innerHTML.Compile({idx:idx,title:item.title+(item.required==1?' *':''),required:item.required||0,options:(function(){var ret='',name=item.key+parseInt((Math.random()*1000000),10),tmpl=document.querySelector('#form-field-'+item.key+'-option').innerHTML;(item.services||[]).forEach(function(v,i){ret+=tmpl.Compile({id:item.key+parseInt((Math.random()*1000000000),10),name:name,option:v});});return ret;})()})}});Array.from(_div.querySelectorAll('.form-field-phone')).forEach(function(ele,i){v('click',function(e){var _select=eleParents(e.target,'.form-field-phone').querySelector('.dial-code-select');if(_select.style.display=='block'){_select.style.display='none';}else{_select.style.display='block';}},ele.querySelector('.dial-code'));v('click',function(e){if(eleParents(e.target,'ul').querySelector('.selected'))eleParents(e.target,'ul').querySelector('.selected').classList.remove('selected');var _li=eleParents(e.target,'li');_li.classList.add('selected');eleParents(e.target,'.form-field-phone').querySelector('.dial-code span').innerText=_li.dataset.dial;eleParents(e.target,'.dial-code-select').style.display='none';},ele.querySelector('.dial-code-select ul'))});if(!d.querySelector('#grecaptcha-js')){var js1=d.createElement(s),fjs=d.getElementsByTagName(s)[0];js1.id='grecaptcha-js';js1.async=!0;js1.src='https://www.recaptcha.net/recaptcha/api.js?onload=onloadCallback&render=explicit';fjs.parentNode.insertBefore(js1,fjs);}else{onloadCallback();}
if(_div.querySelector('.form-field-date')||_div.querySelector('.form-field-time')){if(!d.querySelector('#jedate-js')){var fjs=d.getElementsByTagName(s)[0];var _link=d.createElement('link');_link.rel='stylesheet';_link.type='text/css';_link.href='https://fly.linkcdn.to/vendor/jedate/jedate.css';fjs.parentNode.insertBefore(_link,fjs);var js=d.createElement(s);js.id='jedate-js';js.async=!0;js.src='https://fly.linkcdn.to/vendor/jedate/jedate.js?t=1';fjs.parentNode.insertBefore(js,fjs);}
ljedatejs(window).then(function(){Array.from(_div.querySelectorAll('.form-field-date')).forEach(function(ele,idx){jeDate(ele.querySelector('input'),{isinitVal:false,initDate:[{DD:"0"},true],festival:false,format:'YYYY-MM-DD',});ele.dataset.dateval=jeDate.nowDate();});Array.from(_div.querySelectorAll('.form-field-time')).forEach(function(ele,idx){jeDate(ele.querySelector('input'),{isinitVal:false,festival:false,format:'hh:mm:ss',});});});}};setTimeout(function(){renderForm();_div.style.height=120+(__form.fields.length*52)+'px';},600);setTimeout(function(){_div.style.height='auto';},1100);return;}
if(_fbe.dataset.type<10&&_fbe.dataset.st==1){var _div=d.createElement('div'),_divBox=d.createElement('div'),_divBg=d.createElement('div');_divBg.className='embed-bg';_divBox.className='embed-box';_divBox.innerHTML='<div class="embed-close"><i class="iconfont icon-close"></i></div><div class="embed-box-title">{0}</div>'.Format(_fbe.querySelector('p').innerText)+d.querySelector('#embedLoading').innerHTML;_div.className='embed-iframe';_divBox.appendChild(_div);_divBg.appendChild(_divBox);d.querySelector('body').append(_divBg);var link=decodeURIComponent(_fbe.dataset.embed||_fbe.dataset.html||'');if(link.indexOf('twitch.tv')!=-1)link+=('&parent='+location.host);if(link.indexOf('tiktok.com')!=-1)_div.className+=' embed-iframe-tiktok';if(link.indexOf('vimeo.com')!=-1)_div.className+=' embed-iframe-vimeo';if(link.indexOf('facebook.com')!=-1||link.indexOf('fb.watch')!=-1||link.indexOf('fb.gg')!=-1){_div.innerHTML='<div class="fb-video" data-href="{0}" data-width="100%" data-allowfullscreen="true"></div>'.Format(link);var loadFBIframe=function(){if(_div.querySelector('iframe')){_div.querySelector('iframe').onload=function(){endLoaded(_divBox.querySelector('.embed-loading'));_div.style.height='200px';setTimeout(function(){_div.style.height='auto';},390);};}};if(d.querySelector('#fb-sdk-js')){FB.XFBML.parse(_div);loadFBIframe();}else{var fjs=d.getElementsByTagName(s)[0];var js=d.createElement(s);js.id='fb-sdk-js';js.async=!0;js.src='https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v12.0';fjs.parentNode.insertBefore(js,fjs);lfbjs(window).then(function(){setTimeout(function(){if(_div.querySelector('iframe')){loadFBIframe();}else{setTimeout(function(){if(_div.querySelector('iframe')){loadFBIframe();}else{setTimeout(function(){loadFBIframe();},300)}},300)}},200);})}}else{_div.innerHTML='<iframe src="{link}" width="100%" height="100%" frameborder="0" allowfullscreen="true" scrolling="no" allow="accelerometer; autoplay;fullscreen;encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'.Compile({link:link});_div.querySelector('iframe').onload=function(){endLoaded(_divBox.querySelector('.embed-loading'));if(_div.classList.contains('embed-iframe-tiktok')){_div.style.height='735px';}else if(_div.classList.contains('embed-iframe-vimeo')){_div.style.paddingBottom='56%';}else{_div.style.height='200px';setTimeout(function(){_div.style.height='auto';},410);}};}
return;}
if(_fbe.dataset.type==1&&(_fbe.dataset.st==5||_fbe.dataset.st==6)){var _div=d.createElement('div'),_divBox=d.createElement('div'),_divBg=d.createElement('div');_divBg.className='embed-bg';_divBox.className='embed-box';_divBox.innerHTML='<div class="embed-close"><i class="iconfont icon-close"></i></div>';_div.className='embed-twitter';_divBox.appendChild(_div);_divBg.appendChild(_divBox);d.querySelector('body').append(_divBg);var link=decodeURIComponent(_fbe.dataset.embed||_fbe.dataset.html||'');var twCls='twitter-tweet';if(_fbe.dataset.st==6){link=link.replace(/(\/status\/.*)|(\/?\?.*)/i,'');twCls='twitter-timeline'}
_div.innerHTML='<blockquote class="{2}" align="center" data-height="500"></blockquote>{1}<div class="embed-twitter-link"><a href="{0}" target="_blank"><span>View Tweet</span></a></div>'.Format(link,d.querySelector('#embedLoading').innerHTML,twCls);var loadTweetTimeline=function(st,lnk){if(st==5){twttr.widgets.createTweet(lnk.split('/').pop(),_div.querySelector('blockquote'),{align:'center'}).then(function(){endLoaded(_div.querySelector('.embed-loading'),function(){_div.querySelector('.embed-twitter-link').style.display='block';})});}else{twttr.widgets.createTimeline({sourceType:"profile",screenName:lnk.split('/').pop()},_div.querySelector('blockquote'),{height:500,align:'center'}).then(function(){endLoaded(_div.querySelector('.embed-loading'),function(){_div.querySelector('.embed-twitter-link').style.display='block';})});}};if(d.querySelector('#twitter-wjs')){loadTweetTimeline(_fbe.dataset.st,link)}else{var fjs=d.getElementsByTagName(s)[0];var js=d.createElement(s);js.id='twitter-wjs';js.async=!0;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);ltwwjs(window).then(function(){loadTweetTimeline(_fbe.dataset.st,link)});}}
if(_fbe.dataset.type==1&&_fbe.dataset.st==3){var _div=d.createElement('div'),_divBox=d.createElement('div'),_divBg=d.createElement('div');_divBg.className='embed-bg';_divBox.className='embed-box';_divBox.innerHTML='<div class="embed-close"><i class="iconfont icon-close"></i></div><div class="embed-box-title">{0}</div>'.Format(_fbe.querySelector('p').innerText)+d.querySelector('#embedLoading').innerHTML;_div.className='embed-iframe';_divBox.appendChild(_div);_divBg.appendChild(_divBox);d.querySelector('body').append(_divBg);var txt=JSON.parse(decodeURIComponent(_fbe.dataset.txt)||'{}');var music=txt.music||{};var service=((txt.services||[]).find(function(val){return val.platform==music.platform;})||{});var link=service.url||'',mtype=service.type==2?'track':'list';_div.className+=' embed-iframe-'+music.platform;if(link.indexOf('spotify.com')!=-1)link=link.replace(/(https?\/?\/?).*\.spotify\.com/i,'https://open.spotify.com/embed');else if(link.indexOf('apple.com')!=-1)link=link.replace(/(https?\/?\/?).*\.apple\.com/i,'https://embed.music.apple.com');else if(link.indexOf('deezer.com')!=-1){link=link.replace(/(https?\/?\/?).*\.deezer\.com\/([a-z]{2,4}\/)?/i,'https://widget.deezer.com/widget/auto/');if(service.type==3)link+='/top_tracks'}
else if(link.indexOf('napster.com')!=-1){var _uri=(service.uri||'napster::').split(':');link='http://us.napster.com/embedded-player/?ocode=social_user&pcode=social_user&cpath=Embed&rsrc='+('{0}#/{0}s/{1}'.Format(_uri[1],_uri[2]));}
else if(link.indexOf('soundcloud.com')!=-1){var _uri=(service.uri||'soundcloud::').split(':');_uri[1]=_uri[1]=='album'?'playlist':(_uri[1]=='artist'?'user':_uri[1]);link='https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/{0}s/{1}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true'.Format(_uri[1],_uri[2])}else{link='';}
if(link){_div.innerHTML='<iframe mtype="{mtype}" src="{link}" width="100%" height="100%" frameborder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>'.Compile({link:link,mtype:mtype});}else{_div.innerHTML='<div class="music-preview-nosample"><div class="nosample-cover"><img src="{0}"></div><p class="nosample-title">{1}</p></div>'.Format(clearImage(music.cover),music.title);}
var servicesHTML='';(txt.services||[]).forEach(function(val,idx){servicesHTML+=d.querySelector('#music-preview-service').innerHTML.Compile({logo:val.platform_info&&val.platform_info.platform?clearImage((val.platform_info||{}).icon):'https://fly.linkcdn.to/images/links/service/logo/{0}.png'.Format(val.platform),platform:(val.platform_info||{}).platform||val.platform,name:MUSIC_SERVICES[val.platform]||(val.platform_info||{}).platform,link:checkLink(val.url)});});_div.innerHTML+='<div class="music-preview">{0}</div>'.Format(servicesHTML);if((txt.services||[]).length>5){_div.innerHTML+='<div class="msuic-preview-more"><button data-action="more" onclick="musicPreviewMore(this)">Show more</button></div>'}
_div.querySelector('iframe').onload=function(){endLoaded(_divBox.querySelector('.embed-loading'));_div.style.height='200px';setTimeout(function(){_div.style.height='auto';},450);};return;}
if(_fbe.dataset.type==1&&_fbe.dataset.st==8){var _div=d.createElement('div'),_divBox=d.createElement('div'),_divBg=d.createElement('div');_divBg.className='embed-bg';_divBox.className='embed-box';_divBox.innerHTML='<div class="embed-close"><i class="iconfont icon-close"></i></div><div class="embed-box-title">{0}</div>'.Format(_fbe.querySelector('p').innerText)+d.querySelector('#embedLoading').innerHTML;_div.className='embed-gl-maps';_divBox.appendChild(_div);_divBg.appendChild(_divBox);d.querySelector('body').append(_divBg);var txt=JSON.parse(decodeURIComponent(_fbe.dataset.txt)||'{}');_div.innerHTML='<blockquote></blockquote>';var initMaps=function(glmap,ele){if(ele&&glmap.locations&&glmap.locations.length>0){var loc=glmap.locations[0],style=glmap.style||{};var map=new google.maps.Map(ele,{center:{lat:parseFloat(loc.latitude),lng:parseFloat(loc.longitude)},zoom:style.zoom||8,zoomControl:!!style.zoomControl,gestureHandling:style.draggable?'auto':'none',fullscreenControl:false,streetViewControl:false,});glmap.locations.forEach(function(val,idx){var marker=new google.maps.Marker({position:{lat:parseFloat(val.latitude),lng:parseFloat(val.longitude)},map,title:val.title,});var directionsLink=style.directionsLink?'<a href="{0}" target="_blank">{1}</a>'.Format('https://maps.google.com/maps?ll={0},{1}&z=19&q={2}&t=m&mapclient=apiv3'.Format(val.latitude,val.longitude,encodeURIComponent(val.address||'')),val.address||'Direction Link'):'';var infowindow=new google.maps.InfoWindow({content:'<div class="infoWindow"><div class="siteNotice"></div><h1 class="firstHeading">{0}</h1><div id="bodyContent"><p>{1}</p><p>{2}</p></div></div>'.Format(val.title,val.desc,directionsLink),});marker.addListener("click",()=>{infowindow.open({anchor:marker,map,shouldFocus:true,});});});_div.style.paddingBottom='75%';endLoaded(_divBox.querySelector('.embed-loading'));}};if(d.querySelector('#gl-maps-js')){initMaps(txt,_div.querySelector('blockquote'));}else{var fjs=d.getElementsByTagName(s)[0];var js=d.createElement(s);js.id='gl-maps-js';js.async=!0;js.src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAa_XufDnMu5wiY67Bjfe9FnUD-Ragifww&v=weekly';fjs.parentNode.insertBefore(js,fjs);lglmapsjs(window).then(function(){initMaps(txt,_div.querySelector('blockquote'));});}
return;}
if(_fbe.dataset.type==1&&_fbe.dataset.st==7){var _div=d.createElement('div'),_divBox=d.createElement('div'),_divBg=d.createElement('div'),_divDetail=d.createElement('div');_divBg.className='embed-bg';_divBox.className='embed-box';_divBox.innerHTML='<div class="embed-close"><i class="iconfont icon-close"></i></div>';_div.className='embed-support';_divBox.appendChild(_div);_divBg.appendChild(_divBox);_divDetail.className='embed-support-detail';_divBox.appendChild(_divDetail);d.querySelector('body').append(_divBg);var txt=JSON.parse(decodeURIComponent(_fbe.dataset.txt)||'{}');var amountHTML='',amountTMPL=d.querySelector('#embed-support-smount').innerHTML;txt.amount.forEach(function(val,idx){amountHTML+=amountTMPL.Format(parseInt(Math.random()*10000000000,10),(val/100.00),val)});_div.innerHTML=d.querySelector('#embed-support').innerHTML.Compile({amount:amountHTML,desc:txt.desc,success:decodeURIComponent(txt.success),customDisplay:txt.customAmount?'block':'none',payType:txt.provider.type,key:txt.provider.key});_divDetail.innerHTML=d.querySelector('#embed-support-detail').innerHTML.Compile({success:decodeURIComponent(txt.success),noteDisplay:txt.noteMessage?'block':'none',link:location.pathname.slice(1),payType:txt.provider.type,key:txt.provider.key,id:txt.provider.id,merchantid:txt.provider.merchantId});v("click",selectSupportAmount,_div.querySelector('.support-amount'));v("keyup",selectSupportAmount,_div.querySelector('.support-amount'));v("click",payContinue,_div.querySelector('.support-continue button'));v("click",payBack,_divDetail.querySelector('.support-back button'));v("keyup",paySupportCheckEmail,_divDetail.querySelector('.support-detail-email input'));v("click",paySupportAction,_divDetail.querySelector('.support-continue button'));return;}
if(_fbe.dataset.type==1&&_fbe.dataset.st==9){var _div=d.createElement('div'),_divBox=d.createElement('div'),_divBg=d.createElement('div'),_divDetail=d.createElement('div');_divBg.className='embed-bg';_divBox.className='embed-box';_divBox.innerHTML=d.querySelector('#embedLoading').innerHTML+'<div class="embed-close"><i class="iconfont icon-close"></i></div>';_div.className='embed-shopify';_divBox.appendChild(_div);_divBg.appendChild(_divBox);_divDetail.className='embed-shopify-box';_div.appendChild(_divDetail);d.querySelector('body').append(_divBg);var txt=JSON.parse(decodeURIComponent(_fbe.dataset.txt)||'{}');if(txt.collection&&txt.collection.id){lfjax('GET','/share/{0}/link/{1}/itgr/shopify/op/collection.products/?prov_id={2}&cid={3}'.Format(__data.basic.uid,__data.bio.id,txt.provider.id,txt.collection.id),{fn:function(resp){resp=JSON.parse(resp||'{}');var tmpl=`<div class="embed-shopify-detail"><div class="shopify-desc"><p>{desc}</p></div><div class="shopify-products">{products}</div></div>
<div class="embed-shopify-info"><div class="embed-shopify-link"><p><a href="{link}" target="_blank">Shop Our Entire Collection</a></p></div></div>`;var prodTmpl=`<div class="shopify-product"><div class="shopify-product-img"><img src="{src}"></div><div class="shopify-product-title"><p>{title}</p></div><div class="shopify-product-price">{price}</div></div>`,productsHTML='';if(resp.code==0){(resp.data.collection.products.edges||[]).forEach(function(item){var _price=item.node.priceRangeV2.minVariantPrice||item.node.priceRangeV2.maxVariantPrice;productsHTML+=prodTmpl.Compile({src:item.node.featuredImage.src,title:item.node.title,price:_price.currencyCode+_price.amount})});var winW=window.innerWidth,pl=(resp.data.collection.products.edges||[]).length;_divDetail.innerHTML=tmpl.Compile({desc:txt.desc||'',link:'https://'+txt.provider.link+'/collections/'+resp.data.collection.handle,products:productsHTML});_div.style.height=150+(txt.desc?parseInt(txt.desc.length/100,10)*20:0)+(winW>767?(pl?parseInt(pl/2,10)*300:0):300)+'px';endLoaded(_divBox.querySelector('.embed-loading'));setTimeout(function(){_div.style.height='auto'},400);}}})}else{lfjax('GET','/share/{0}/link/{1}/itgr/shopify/op/products/?prov_id={2}&ids={3}'.Format(__data.basic.uid,__data.bio.id,txt.provider.id,txt.products.join(',')),{fn:function(resp){resp=JSON.parse(resp||'{}');var tmpl=`<div class="embed-shopify-detail"><div class="shopify-desc"><p>{desc}</p></div><div class="shopify-products">{products}</div></div>
<div class="embed-shopify-info"><div class="embed-shopify-link"><p><a href="{link}" target="_blank">Shop Our Entire Shop</a></p></div></div>`;var prodTmpl=`<div class="shopify-product"><div class="shopify-product-img"><img src="{src}"></div><div class="shopify-product-title"><p>{title}</p></div><div class="shopify-product-price">{price}</div></div>`,productsHTML='';if(resp.code==0){(resp.data.products.edges||[]).forEach(function(item){var _price=item.node.priceRangeV2.minVariantPrice||item.node.priceRangeV2.maxVariantPrice;productsHTML+=prodTmpl.Compile({src:item.node.featuredImage.src,title:item.node.title,price:_price.currencyCode+_price.amount})});var winW=window.innerWidth,pl=(resp.data.products.edges||[]).length;_divDetail.innerHTML=tmpl.Compile({desc:txt.desc||'',link:'https://'+txt.provider.link,products:productsHTML});_div.style.height=150+(txt.desc?parseInt(txt.desc.length/100,10)*20:0)+(winW>767?(pl?parseInt(pl/2,10)*300:0):300)+'px';endLoaded(_divBox.querySelector('.embed-loading'));setTimeout(function(){_div.style.height='auto'},400);}}})}}
if(_fbe.dataset.type<10&&_fbe.dataset.st==2){d.querySelector('.modal-block').style.display='block';d.querySelector('.modal-block .subs-title').innerHTML=decodeURIComponent(_fbe.dataset.embed);d.querySelector('.modal-block .subs-btn').dataset.kid=_fbe.dataset.kid;}};var c1=function(e){window.event?window.event.cancelBubble=true:e.stopPropagation();var _fbe=e.target||e.srcElement||{},_fte=e.target||e.srcElement||{},_tmpl=null;_fbe=_fbe.parentElement;if(_fte.nodeName=='I'&&_fte.classList.contains('icon-close')&&_fbe.classList.contains('embed-close')){d.querySelector('.embed-bg').remove();return;}
if(_fte.classList.contains('embed-bg')){d.querySelector('.embed-bg').remove();return;}
if(_fte.nodeName=='BUTTON'&&_fbe.classList.contains('form-button')){handleSubmit(e);return;}};var c2=function(e){d.querySelector('.modal-block').style.display='none';d.querySelector('.modal-block .subs-title').innerHTML='';d.querySelector('.modal-block .info').style.display='block';d.querySelector('.modal-block .success').style.display='none';d.querySelector('.modal-block .subs-btn').style.display='inline-block';};var c3=function(){var w=window.innerWidth>=700?700:window.innerWidth;var h=window.innerHeight>=800?800:window.innerHeight;var kid=d.querySelector('.modal-block .subs-btn').dataset.kid;if(kid)window.open('https://api.linkfly.to/v/1.8/plat/youtube/auth/lnk/{0}/?id={1}'.Format(__data.bio.id,kid),'YoutubeAuth'+new Date().getTime(),"resizable,scrollbars,status,width={0},height={1}".Format(w,h));};v("click",c,d.querySelector('.container'));v("click",c1,d.querySelector('body'));v("click",c2,d.querySelector('.modal-block .modal-close'));v("click",c3,d.querySelector('.modal-block .subs-btn'));}(document,'script'));